<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport"
        content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>Lekker Lingo: Afrikaans 101</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&family=Space+Grotesk:wght@400;500;700&display=swap');

        :root {
            --app-bg: #FDF6E3;
            --primary: #D35400;
            --secondary: #27AE60;
            --tab-bar-bg: rgba(255, 255, 255, 0.95);
        }

        html,
        body {
            height: 100%;
            margin: 0;
            padding: 0;
            overflow: hidden;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            background-color: var(--app-bg);
            color: #2c3e50;
            -webkit-tap-highlight-color: transparent;
        }

        #root {
            height: 100%;
            width: 100%;
            display: flex;
            justify-content: center;
        }

        .app-container {
            width: 100%;
            max-width: 500px;
            height: 100%;
            position: relative;
            background: var(--app-bg);
            box-shadow: 0 0 40px rgba(0, 0, 0, 0.05);
        }

        .font-display {
            font-family: 'Space Grotesk', sans-serif;
        }

        .page-enter {
            animation: slideUp 0.3s cubic-bezier(0.16, 1, 0.3, 1);
        }

        .scale-tap:active {
            transform: scale(0.96);
            transition: transform 0.1s;
        }

        @keyframes slideUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .custom-scrollbar::-webkit-scrollbar {
            width: 6px;
        }

        .custom-scrollbar::-webkit-scrollbar-track {
            background: transparent;
        }

        .custom-scrollbar::-webkit-scrollbar-thumb {
            background-color: rgba(0, 0, 0, 0.1);
            border-radius: 20px;
        }

        .glass {
            background: var(--tab-bar-bg);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border-top: 0.5px solid rgba(0, 0, 0, 0.1);
        }

        .bush-gradient {
            background: linear-gradient(135deg, #D35400 0%, #E67E22 100%);
        }

        .veld-gradient {
            background: linear-gradient(135deg, #27AE60 0%, #2ECC71 100%);
        }

        .safe-pb {
            padding-bottom: env(safe-area-inset-bottom);
        }
    </style>
</head>

<body>
    <!-- Pinch to home enabled via script -->
    <div id="root"></div>
    <script src="../gestures.js"></script>

    <!-- Data & Logic -->
    <script type="text/babel">
        const { useState, useEffect, useRef, useMemo } = React;

        // --- ICONS ---
        const Icons = {
            Map: ({ active }) => <svg className={`w-6 h-6 ${active ? 'text-[#D35400]' : 'text-gray-400'}`} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth={active ? 2.5 : 2} strokeLinecap="round" strokeLinejoin="round"><path d="M1 6v16l7-4 8 4 7-4V2l-7 4-8-4-7 4z" /><line x1="8" y1="2" x2="8" y2="18" /><line x1="16" y1="6" x2="16" y2="22" /></svg>,
            Path: ({ active }) => <svg className={`w-6 h-6 ${active ? 'text-[#D35400]' : 'text-gray-400'}`} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth={active ? 2.5 : 2} strokeLinecap="round" strokeLinejoin="round"><path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z" /><circle cx="12" cy="10" r="3" /></svg>,
            Learn: ({ active }) => <svg className={`w-6 h-6 ${active ? 'text-[#D35400]' : 'text-gray-400'}`} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth={active ? 2.5 : 2} strokeLinecap="round" strokeLinejoin="round"><path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z" /><path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z" /></svg>,
            Profile: ({ active }) => <svg className={`w-6 h-6 ${active ? 'text-[#D35400]' : 'text-gray-400'}`} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth={active ? 2.5 : 2} strokeLinecap="round" strokeLinejoin="round"><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2" /><circle cx="12" cy="7" r="4" /></svg>,
            Play: () => <svg className="w-5 h-5 fill-white" viewBox="0 0 24 24"><path d="M8 5v14l11-7z" /></svg>,
            Check: () => <svg className="w-5 h-5 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor" strokeWidth="3"><path strokeLinecap="round" strokeLinejoin="round" d="M5 13l4 4L19 7" /></svg>,
            Lock: () => <svg className="w-4 h-4 text-gray-400" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><rect x="3" y="11" width="18" height="11" rx="2" ry="2" /><path d="M7 11V7a5 5 0 0110 0v4" /></svg>,
            Speaker: () => <svg className="w-6 h-6 text-[#D35400]" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"></polygon><path d="M19.07 4.93a10 10 0 0 1 0 14.14M15.54 8.46a5 5 0 0 1 0 7.07"></path></svg>,
            Flame: () => <svg className="w-4 h-4 text-[#D35400]" viewBox="0 0 24 24" fill="currentColor"><path d="M8.5 14.5A2.5 2.5 0 0011 12c0-1.38-5-6.33-5-6.33S1 10.62 1 12a2.5 2.5 0 002.5 2.5 2.5 2.5 0 002.5-2.5 2.5 2.5 0 002.5 2.5zM12 2c0 0-1.84 2.13-2.5 4.5C11 5.5 14 3 14 3s-2.13 6.66-4.5 9.5c.34-3 3-5.5 3-5.5s1.84 3.16 1.84 6.5C14.34 18.25 10.5 22 10.5 22s5.66-2.17 7-6.5C18.16 13.16 16.5 9.83 12 2z" /></svg>,
            Reset: () => <svg className="w-5 h-5 text-gray-400" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><path d="M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8" /><path d="M3 3v5h5" /></svg>
        };

        // --- DATA ---
        const VOCAB_DATA = [
            // Core Words (1-20)
            { id: 1, category: "Core", title: "die", english: ["the"], phonetic: "dee", mnemonic: "THE article, like 'the'", desc: "Most common word in Afrikaans", xp: 25 },
            { id: 2, category: "Core", title: "en", english: ["and"], phonetic: "en", mnemonic: "Just like English 'and'", desc: "Connector word", xp: 25 },
            { id: 3, category: "Core", title: "wees", english: ["to be"], phonetic: "vehs", mnemonic: "We ES (are)", desc: "Infinitive of 'to be'", xp: 50 },
            { id: 4, category: "Core", title: "van", english: ["of", "from"], phonetic: "fun", mnemonic: "VAN full of things", desc: "Shows possession or origin", xp: 25 },
            { id: 5, category: "Core", title: "h√™", english: ["to have"], phonetic: "heh", mnemonic: "HEH, I have it", desc: "Possession verb", xp: 50 },
            { id: 6, category: "Core", title: "in", english: ["in"], phonetic: "in", mnemonic: "Same as English 'in'", desc: "Preposition for location", xp: 25 },
            { id: 7, category: "Core", title: "nie", english: ["not"], phonetic: "nee", mnemonic: "KNEE to negativity", desc: "Negation word", xp: 50 },
            { id: 8, category: "Core", title: "te", english: ["to", "too"], phonetic: "tuh", mnemonic: "TEA is too hot", desc: "Can mean 'to' or 'too'", xp: 25 },
            { id: 9, category: "Core", title: "wat", english: ["what", "which"], phonetic: "vut", mnemonic: "WHAT are you doing?", desc: "Question word", xp: 50 },
            { id: 10, category: "Core", title: "dit", english: ["it", "this"], phonetic: "dit", mnemonic: "DIT is this", desc: "Demonstrative pronoun", xp: 25 },
            { id: 11, category: "Core", title: "vir", english: ["for"], phonetic: "feer", mnemonic: "FEAR for something", desc: "Preposition", xp: 25 },
            { id: 12, category: "Core", title: "op", english: ["on", "up"], phonetic: "awp", mnemonic: "UP on top", desc: "Preposition for position", xp: 25 },
            { id: 13, category: "Core", title: "word", english: ["become", "becomes"], phonetic: "vort", mnemonic: "WORD becomes reality", desc: "Verb 'to become'", xp: 50 },
            { id: 14, category: "Core", title: "met", english: ["with"], phonetic: "met", mnemonic: "MET with someone", desc: "Accompaniment", xp: 25 },
            { id: 15, category: "Core", title: "dat", english: ["that"], phonetic: "dut", mnemonic: "DAT is that", desc: "Conjunction", xp: 25 },
            { id: 16, category: "Core", title: "se", english: ["'s", "his", "her", "its"], phonetic: "suh", mnemonic: "John SE book (John's)", desc: "Possessive marker", xp: 50 },
            { id: 17, category: "Core", title: "ons", english: ["we", "us", "our"], phonetic: "awns", mnemonic: "All of US", desc: "First person plural", xp: 50 },
            { id: 18, category: "Core", title: "as", english: ["as", "if"], phonetic: "us", mnemonic: "AS if!", desc: "Comparison or condition", xp: 25 },
            { id: 19, category: "Core", title: "sy", english: ["her", "his"], phonetic: "say", mnemonic: "SAY it's his/hers", desc: "Possessive pronoun", xp: 50 },
            { id: 20, category: "Core", title: "kan", english: ["can"], phonetic: "kun", mnemonic: "CAN do attitude", desc: "Ability modal verb", xp: 50 },

            // Pronouns & People (21-30)
            { id: 21, category: "Pronouns", title: "ek", english: ["I"], phonetic: "eck", mnemonic: "I ECK out a living", desc: "First person singular", xp: 50 },
            { id: 22, category: "Pronouns", title: "hy", english: ["he"], phonetic: "hay", mnemonic: "HEY it's him", desc: "Third person masculine", xp: 50 },
            { id: 23, category: "Pronouns", title: "hulle", english: ["they", "them"], phonetic: "huh-luh", mnemonic: "HULLABALOO they make", desc: "Third person plural", xp: 50 },
            { id: 24, category: "Pronouns", title: "my", english: ["my"], phonetic: "may", mnemonic: "MY stuff", desc: "First person possessive", xp: 25 },
            { id: 25, category: "Pronouns", title: "jy", english: ["you"], phonetic: "yay", mnemonic: "YAY it's you", desc: "Second person informal", xp: 50 },
            { id: 26, category: "Pronouns", title: "jou", english: ["your"], phonetic: "yoh", mnemonic: "YO that's yours", desc: "Second person possessive", xp: 50 },
            { id: 27, category: "Pronouns", title: "haar", english: ["her"], phonetic: "hahr", mnemonic: "HAIR belongs to her", desc: "Feminine possessive", xp: 50 },
            { id: 28, category: "Pronouns", title: "hom", english: ["him"], phonetic: "hawm", mnemonic: "HOME with him", desc: "Masculine object pronoun", xp: 50 },
            { id: 29, category: "Pronouns", title: "hul", english: ["their"], phonetic: "hull", mnemonic: "HULL of their ship", desc: "Third person possessive", xp: 50 },
            { id: 30, category: "Pronouns", title: "julle", english: ["you", "you all"], phonetic: "yuh-luh", mnemonic: "Y'ALL come back", desc: "Second person plural", xp: 50 },

            // Common Verbs (31-50)
            { id: 31, category: "Verbs", title: "sal", english: ["shall", "will"], phonetic: "sul", mnemonic: "SHALL we dance?", desc: "Future tense helper", xp: 50 },
            { id: 32, category: "Verbs", title: "moet", english: ["must"], phonetic: "moot", mnemonic: "MOOT point - must discuss", desc: "Obligation modal", xp: 50 },
            { id: 33, category: "Verbs", title: "s√™", english: ["to say"], phonetic: "seh", mnemonic: "SAY what you mean", desc: "Speech verb", xp: 50 },
            { id: 34, category: "Verbs", title: "gaan", english: ["to go"], phonetic: "khahn", mnemonic: "GONE away", desc: "Motion verb", xp: 50 },
            { id: 35, category: "Verbs", title: "maak", english: ["to make"], phonetic: "mahk", mnemonic: "MAKE it happen", desc: "Creation verb", xp: 50 },
            { id: 36, category: "Verbs", title: "wil", english: ["to want"], phonetic: "vill", mnemonic: "WILL power to want", desc: "Desire verb", xp: 50 },
            { id: 37, category: "Verbs", title: "kom", english: ["come"], phonetic: "kawm", mnemonic: "COME here", desc: "Motion toward", xp: 50 },
            { id: 38, category: "Verbs", title: "doen", english: ["to do"], phonetic: "doon", mnemonic: "DONE doing it", desc: "Action verb", xp: 50 },
            { id: 39, category: "Verbs", title: "laat", english: ["to let", "late"], phonetic: "laht", mnemonic: "LET it be late", desc: "Permission or timing", xp: 50 },
            { id: 40, category: "Verbs", title: "kry", english: ["to get"], phonetic: "kray", mnemonic: "CRY until you get it", desc: "Obtain verb", xp: 50 },
            { id: 41, category: "Verbs", title: "gee", english: ["to give"], phonetic: "khee", mnemonic: "GEE, thanks for giving", desc: "Transfer verb", xp: 50 },
            { id: 42, category: "Verbs", title: "gebruik", english: ["to use"], phonetic: "khuh-broyk", mnemonic: "BROKE from overuse", desc: "Utilization verb", xp: 75 },
            { id: 43, category: "Verbs", title: "hou", english: ["to hold", "to like"], phonetic: "hoh", mnemonic: "HOLD on tight", desc: "Grasp or preference", xp: 50 },
            { id: 44, category: "Verbs", title: "volg", english: ["to follow"], phonetic: "fawlkh", mnemonic: "FOLK follow traditions", desc: "Pursuit verb", xp: 50 },
            { id: 45, category: "Verbs", title: "weet", english: ["to know"], phonetic: "veet", mnemonic: "WE'T (we know)", desc: "Knowledge verb", xp: 50 },
            { id: 46, category: "Verbs", title: "sien", english: ["to see"], phonetic: "seen", mnemonic: "SEEN with my eyes", desc: "Vision verb", xp: 50 },
            { id: 47, category: "Verbs", title: "staan", english: ["to stand"], phonetic: "stahn", mnemonic: "STAND up straight", desc: "Posture verb", xp: 50 },
            { id: 48, category: "Verbs", title: "dink", english: ["to think"], phonetic: "dink", mnemonic: "THINK deeply", desc: "Thought verb", xp: 50 },
            { id: 49, category: "Verbs", title: "lewe", english: ["life", "to live"], phonetic: "leh-vuh", mnemonic: "LIVE your life", desc: "Existence noun/verb", xp: 50 },
            { id: 50, category: "Verbs", title: "werk", english: ["work"], phonetic: "verk", mnemonic: "WORK hard", desc: "Labor noun/verb", xp: 50 },

            // Adjectives & Adverbs (51-70)
            { id: 51, category: "Modifiers", title: "baie", english: ["very", "many"], phonetic: "buy-uh", mnemonic: "BUY A lot", desc: "Intensity or quantity", xp: 50 },
            { id: 52, category: "Modifiers", title: "ook", english: ["also"], phonetic: "oak", mnemonic: "OAK tree also grows", desc: "Addition word", xp: 50 },
            { id: 53, category: "Modifiers", title: "groot", english: ["big", "large"], phonetic: "khroht", mnemonic: "GREAT and big", desc: "Size adjective", xp: 50 },
            { id: 54, category: "Modifiers", title: "goed", english: ["good"], phonetic: "khoot", mnemonic: "GOOD stuff", desc: "Quality adjective", xp: 50 },
            { id: 55, category: "Modifiers", title: "nuut", english: ["new"], phonetic: "neet", mnemonic: "NEAT and new", desc: "Freshness adjective", xp: 50 },
            { id: 56, category: "Modifiers", title: "eerste", english: ["first"], phonetic: "eers-tuh", mnemonic: "FIRST place", desc: "Ordinal number", xp: 50 },
            { id: 57, category: "Modifiers", title: "oud", english: ["old"], phonetic: "oh-ood", mnemonic: "OLD and tired", desc: "Age adjective", xp: 50 },
            { id: 58, category: "Modifiers", title: "so", english: ["so", "such"], phonetic: "saw", mnemonic: "SO very much", desc: "Degree adverb", xp: 25 },
            { id: 59, category: "Modifiers", title: "net", english: ["just", "only"], phonetic: "net", mnemonic: "NET result, just this", desc: "Limitation word", xp: 50 },
            { id: 60, category: "Modifiers", title: "nog", english: ["still", "yet"], phonetic: "nawkh", mnemonic: "NOT yet done", desc: "Continuation word", xp: 50 },
            { id: 61, category: "Modifiers", title: "soos", english: ["like", "as"], phonetic: "sohs", mnemonic: "SO thus, like this", desc: "Comparison word", xp: 50 },
            { id: 62, category: "Modifiers", title: "nou", english: ["now"], phonetic: "noh", mnemonic: "NOW is the time", desc: "Time adverb", xp: 50 },
            { id: 63, category: "Modifiers", title: "een", english: ["one"], phonetic: "ain", mnemonic: "ONE and only", desc: "Number one", xp: 25 },
            { id: 64, category: "Modifiers", title: "twee", english: ["two"], phonetic: "tveh", mnemonic: "TWO of a kind", desc: "Number two", xp: 25 },
            { id: 65, category: "Modifiers", title: "elk", english: ["each"], phonetic: "elk", mnemonic: "ELK each one", desc: "Distribution word", xp: 50 },
            { id: 66, category: "Modifiers", title: "geen", english: ["no", "none"], phonetic: "khain", mnemonic: "GAIN none", desc: "Negative quantity", xp: 50 },
            { id: 67, category: "Modifiers", title: "saam", english: ["together"], phonetic: "sahm", mnemonic: "SOME together", desc: "Unity adverb", xp: 50 },
            { id: 68, category: "Modifiers", title: "egter", english: ["however"], phonetic: "ekh-ter", mnemonic: "EXTRA however", desc: "Contrast word", xp: 75 },
            { id: 69, category: "Modifiers", title: "al", english: ["already", "all"], phonetic: "ul", mnemonic: "ALL already done", desc: "Completion word", xp: 50 },
            { id: 70, category: "Modifiers", title: "di√©", english: ["those", "this"], phonetic: "dee", mnemonic: "THESE ones", desc: "Demonstrative", xp: 50 },

            // Prepositions & Conjunctions (71-85)
            { id: 71, category: "Connectors", title: "aan", english: ["on", "at"], phonetic: "ahn", mnemonic: "ON the spot", desc: "Location preposition", xp: 25 },
            { id: 72, category: "Connectors", title: "by", english: ["at", "by"], phonetic: "bay", mnemonic: "BY the bay", desc: "Proximity preposition", xp: 25 },
            { id: 73, category: "Connectors", title: "maar", english: ["but"], phonetic: "mahr", mnemonic: "MORE but...", desc: "Contrast conjunction", xp: 50 },
            { id: 74, category: "Connectors", title: "daar", english: ["there"], phonetic: "dahr", mnemonic: "THERE it is", desc: "Location adverb", xp: 50 },
            { id: 75, category: "Connectors", title: "deur", english: ["through", "by"], phonetic: "duhr", mnemonic: "DOOR you go through", desc: "Passage preposition", xp: 50 },
            { id: 76, category: "Connectors", title: "of", english: ["or"], phonetic: "awf", mnemonic: "OFF or on", desc: "Choice conjunction", xp: 25 },
            { id: 77, category: "Connectors", title: "oor", english: ["over", "about"], phonetic: "ohr", mnemonic: "OVER the topic", desc: "Topic/position preposition", xp: 50 },
            { id: 78, category: "Connectors", title: "tot", english: ["until"], phonetic: "tawt", mnemonic: "TAUGHT until understood", desc: "Time limit preposition", xp: 50 },
            { id: 79, category: "Connectors", title: "uit", english: ["out", "out of"], phonetic: "oyt", mnemonic: "OUT of here", desc: "Exit preposition", xp: 50 },
            { id: 80, category: "Connectors", title: "toe", english: ["then", "closed"], phonetic: "too", mnemonic: "TOO late, then closed", desc: "Sequence or state", xp: 50 },
            { id: 81, category: "Connectors", title: "waar", english: ["where"], phonetic: "vahr", mnemonic: "WHERE are you?", desc: "Location question", xp: 50 },
            { id: 82, category: "Connectors", title: "dan", english: ["then"], phonetic: "dun", mnemonic: "DONE, then what?", desc: "Sequence word", xp: 50 },
            { id: 83, category: "Connectors", title: "teen", english: ["against"], phonetic: "tain", mnemonic: "TEEN rebels against", desc: "Opposition preposition", xp: 50 },
            { id: 84, category: "Connectors", title: "hoe", english: ["how"], phonetic: "hoo", mnemonic: "HOW do you do?", desc: "Method question", xp: 50 },
            { id: 85, category: "Connectors", title: "onder", english: ["under"], phonetic: "awn-der", mnemonic: "UNDER the table", desc: "Below preposition", xp: 50 },

            // Nouns & Other (86-100)
            { id: 86, category: "Nouns", title: "mens", english: ["person", "human"], phonetic: "mens", mnemonic: "MEN and women", desc: "Human noun", xp: 50 },
            { id: 87, category: "Nouns", title: "hierdie", english: ["this"], phonetic: "hear-dee", mnemonic: "HERE this one", desc: "Near demonstrative", xp: 50 },
            { id: 88, category: "Nouns", title: "jaar", english: ["year"], phonetic: "yahr", mnemonic: "YEAR goes by", desc: "Time period", xp: 50 },
            { id: 89, category: "Nouns", title: "dag", english: ["day"], phonetic: "dakh", mnemonic: "DAY by day", desc: "Time unit", xp: 50 },
            { id: 90, category: "Nouns", title: "land", english: ["country", "land"], phonetic: "lunt", mnemonic: "LAND of the free", desc: "Territory noun", xp: 50 },
            { id: 91, category: "Nouns", title: "kind", english: ["child"], phonetic: "kint", mnemonic: "KIN and child", desc: "Young person", xp: 50 },
            { id: 92, category: "Nouns", title: "plaas", english: ["place", "farm"], phonetic: "plahs", mnemonic: "PLACE on the farm", desc: "Location or farm", xp: 50 },
            { id: 93, category: "Nouns", title: "tyd", english: ["time"], phonetic: "tayt", mnemonic: "TIED to time", desc: "Temporal noun", xp: 50 },
            { id: 94, category: "Nouns", title: "man", english: ["man"], phonetic: "mun", mnemonic: "MAN up", desc: "Adult male", xp: 25 },
            { id: 95, category: "Nouns", title: "hier", english: ["here"], phonetic: "hear", mnemonic: "HERE and now", desc: "This location", xp: 50 },
            { id: 96, category: "Connectors", title: "want", english: ["because"], phonetic: "vunt", mnemonic: "WANT to know why? Because...", desc: "Reason conjunction", xp: 50 },
            { id: 97, category: "Connectors", title: "omdat", english: ["because"], phonetic: "awm-dut", mnemonic: "OM-that reason", desc: "Causation word", xp: 50 },
            { id: 98, category: "Connectors", title: "tussen", english: ["between"], phonetic: "tuh-sin", mnemonic: "TWO-SCENE between", desc: "Middle position", xp: 50 },
            { id: 99, category: "Connectors", title: "voor", english: ["before", "in front of"], phonetic: "fohr", mnemonic: "FOUR comes before five", desc: "Front position/time", xp: 50 },
            { id: 100, category: "Connectors", title: "wanneer", english: ["when"], phonetic: "vun-eer", mnemonic: "WHEN-EVER", desc: "Time question", xp: 50 }
        ];

        // --- COMPONENTS ---
        const Header = ({ title, subtitle, rightAction }) => (
            <div className="sticky top-0 z-40 bg-[rgba(253,246,227,0.95)] backdrop-blur-xl border-b border-orange-100 px-4 pb-3 pt-12 flex justify-between items-end min-h-[110px]">
                <div>
                    <div className="text-xs font-bold text-[#D35400] uppercase tracking-wide mb-1 flex items-center gap-1"><Icons.Flame /> {subtitle}</div>
                    <h1 className="text-3xl font-extrabold text-[#2c3e50] tracking-tight font-display">{title}</h1>
                </div>
                {rightAction}
            </div>
        );

        const TabBar = ({ active, onChange }) => (
            <div className="fixed bottom-0 w-full glass safe-pb flex justify-around items-center h-[83px] z-50 px-2 pb-2">
                {[{ id: 'path', icon: Icons.Path, label: 'Safari' }, { id: 'learn', icon: Icons.Learn, label: 'Lingo' }, { id: 'profile', icon: Icons.Profile, label: 'Passport' }].map(tab => (
                    <button key={tab.id} onClick={() => onChange(tab.id)} className="flex-1 flex flex-col items-center justify-center pt-2 active:scale-95 transition-transform">
                        <tab.icon active={active === tab.id} />
                        <span className={`text-[10px] font-bold mt-1 ${active === tab.id ? 'text-[#D35400]' : 'text-gray-400'}`}>{tab.label}</span>
                    </button>
                ))}
            </div>
        );

        const LevelCard = ({ level, status, onClick }) => {
            const isLocked = status === 'locked';
            const isDone = status === 'completed';
            return (
                <button onClick={() => !isLocked && onClick()} disabled={isLocked} className={`w-full text-left mb-4 p-5 rounded-2xl relative overflow-hidden transition-all scale-tap shadow-sm border ${isLocked ? 'bg-gray-100 border-transparent opacity-60' : 'bg-white border-orange-100'} ${isDone ? 'border-green-500/30 bg-green-50/50' : ''}`}>
                    <div className="flex justify-between items-start mb-2">
                        <span className={`text-[10px] font-bold uppercase tracking-wider py-1 px-2 rounded-md ${isDone ? 'bg-green-100 text-green-700' : (isLocked ? 'bg-gray-200 text-gray-500' : 'bg-[#FADBD8] text-[#C0392B]')}`}>{level.category}</span>
                        {isDone && <div className="bg-green-500 rounded-full p-1"><Icons.Check /></div>}
                        {isLocked && <Icons.Lock />}
                    </div>
                    <h3 className={`text-xl font-bold mb-1 font-display ${isLocked ? 'text-gray-400' : 'text-gray-900'}`}>{level.title}</h3>
                    <p className="text-sm text-gray-500 leading-snug">XP Reward: {level.xp}</p>
                    {!isLocked && <div className="mt-4 flex items-center gap-2 text-xs font-bold text-[#D35400]">{isDone ? 'PRACTICE AGAIN' : 'START LESSON'} <Icons.Play /></div>}
                </button>
            );
        };

        const Quiz = ({ level, onNext }) => {
            const [status, setStatus] = useState('idle'); // idle, success, error
            const [options, setOptions] = useState([]);

            useEffect(() => {
                // Generate options: 1 correct, 3 random wrong
                const correct = level.english[0];
                const others = VOCAB_DATA.filter(l => l.id !== level.id).map(l => l.english[0]);
                const shuffledOthers = others.sort(() => 0.5 - Math.random()).slice(0, 3);
                const all = [correct, ...shuffledOthers].sort(() => 0.5 - Math.random());
                setOptions(all);
                setStatus('idle');
            }, [level]);

            const handleOptionClick = (opt) => {
                if (status === 'success') return;

                if (level.english.includes(opt.toLowerCase())) {
                    setStatus('success');
                    confetti({ colors: ['#D35400', '#27AE60', '#F1C40F'], particleCount: 100, spread: 70, origin: { y: 0.6 } });
                } else {
                    setStatus('error');
                    setTimeout(() => setStatus('idle'), 500);
                    // Vibrate
                    if (navigator.vibrate) navigator.vibrate(50);
                }
            };

            const speak = (text) => {
                if (!window.speechSynthesis) return;
                const ut = new SpeechSynthesisUtterance(text);
                const voices = window.speechSynthesis.getVoices();
                const afVoice = voices.find(v => v.lang.startsWith('af'));
                if (afVoice) ut.voice = afVoice;
                else ut.lang = 'af-ZA';
                window.speechSynthesis.speak(ut);
            };

            // Auto speak on load
            useEffect(() => { setTimeout(() => speak(level.title), 300); }, [level]);

            return (
                <div className="flex flex-col h-full bg-[#FDF6E3] pb-[85px] relative overflow-hidden">
                    <div className="flex-1 flex flex-col items-center justify-center p-6 relative overflow-y-auto custom-scrollbar">
                        <div className="bg-white w-full max-w-md rounded-3xl shadow-xl p-8 text-center border border-orange-100 z-10 relative my-auto">
                            <div className="text-sm font-bold text-gray-400 uppercase mb-4 tracking-widest">{level.category}</div>
                            <h2 className="text-4xl md:text-5xl font-black text-[#2c3e50] mb-2 font-display">{level.title}</h2>
                            <button
                                onClick={() => speak(level.title)}
                                className="inline-flex items-center gap-2 bg-orange-50 text-[#D35400] px-3 py-1 rounded-full text-sm font-mono mb-6 hover:bg-orange-100 transition-colors active:scale-95"
                            >
                                <Icons.Speaker /> {level.phonetic}
                            </button>
                            <p className="text-gray-600 mb-8 leading-relaxed">{level.desc}</p>

                            {status === 'success' ? (
                                <div className="animate-enter">
                                    <div className="text-green-600 font-bold text-xl mb-2">Lekker! Correct.</div>
                                    <div className="bg-green-50 p-4 rounded-xl border border-green-100 text-green-800 text-sm mb-4"><strong>Memory Hack:</strong> {level.mnemonic}</div>
                                    <button onClick={onNext} className="w-full bush-gradient text-white py-4 rounded-xl font-bold shadow-lg text-lg active:scale-95 transition-transform">Next Word</button>
                                </div>
                            ) : (
                                <div className={`grid grid-cols-1 gap-3 w-full ${status === 'error' ? 'animate-shake' : ''}`}>
                                    {options.map((opt, i) => (
                                        <button
                                            key={i}
                                            onClick={() => handleOptionClick(opt)}
                                            className="w-full p-4 bg-gray-50 border border-gray-200 rounded-xl font-bold text-gray-700 hover:bg-orange-50 hover:border-orange-200 active:bg-orange-100 transition-all capitalize"
                                        >
                                            {opt}
                                        </button>
                                    ))}
                                </div>
                            )}
                        </div>
                    </div>
                </div>
            );
        };

        const Profile = ({ xp, completed }) => (
            <div className="p-4 pb-[100px]">
                <div className="bg-white rounded-2xl p-6 shadow-sm mb-6 text-center border border-orange-100">
                    <div className="w-24 h-24 veld-gradient rounded-full mx-auto mb-4 flex items-center justify-center text-4xl shadow-xl shadow-green-500/20">ü¶Å</div>
                    <h2 className="text-2xl font-bold mb-1 font-display">Bushveld Legend</h2>
                    <p className="text-gray-500 text-sm">Level {Math.floor(xp / 500) + 1} Guide</p>
                </div>
                <div className="grid grid-cols-2 gap-4 mb-6">
                    <div className="bg-white p-4 rounded-xl shadow-sm border border-gray-100"><div className="text-[10px] text-gray-400 font-bold uppercase mb-1">Total XP</div><div className="text-3xl font-black text-[#D35400] font-display">{xp}</div></div>
                    <div className="bg-white p-4 rounded-xl shadow-sm border border-gray-100"><div className="text-[10px] text-gray-400 font-bold uppercase mb-1">Words Mastered</div><div className="text-3xl font-black text-green-600 font-display">{completed.length} <span className="text-sm text-gray-300 font-normal">/ {VOCAB_DATA.length}</span></div></div>
                </div>
                <h3 className="font-bold text-gray-900 mb-3 ml-1 font-display">Achievements</h3>
                <div className="space-y-3">
                    <div className={`bg-white p-4 rounded-xl flex items-center gap-4 border border-gray-100 ${completed.length >= 1 ? 'opacity-100' : 'opacity-50 grayscale'}`}><div className="text-2xl">ü¶å</div><div><div className="font-bold text-sm">Springbok</div><div className="text-xs text-gray-500">Learned your first word</div></div></div>
                    <div className={`bg-white p-4 rounded-xl flex items-center gap-4 border border-gray-100 ${completed.length >= 4 ? 'opacity-100' : 'opacity-50 grayscale'}`}><div className="text-2xl">üî•</div><div><div className="font-bold text-sm">Braai Master</div><div className="text-xs text-gray-500">Learned 4 words</div></div></div>
                    <div className={`bg-white p-4 rounded-xl flex items-center gap-4 border border-gray-100 ${completed.length >= 8 ? 'opacity-100' : 'opacity-50 grayscale'}`}><div className="text-2xl">üëë</div><div><div className="font-bold text-sm">King of the Veld</div><div className="text-xs text-gray-500">Completed all basics</div></div></div>
                </div>
            </div>
        );

        const App = () => {
            const [tab, setTab] = useState('path');
            const [completed, setCompleted] = useState([]);
            const [currentLevelId, setCurrentLevelId] = useState(1);
            const [xp, setXp] = useState(0);

            useEffect(() => {
                const save = JSON.parse(localStorage.getItem('lekker_lingo_v1') || '{}');
                if (save.completed) setCompleted(save.completed);
                if (save.xp) setXp(save.xp);
                if (save.current) setCurrentLevelId(save.current);
            }, []);

            useEffect(() => {
                localStorage.setItem('lekker_lingo_v1', JSON.stringify({ completed, xp, current: currentLevelId }));
            }, [completed, xp, currentLevelId]);

            const handleLevelSelect = (id) => { setCurrentLevelId(id); setTab('learn'); };

            const handleNextLevel = () => {
                if (!completed.includes(currentLevelId)) {
                    setCompleted(p => [...p, currentLevelId]);
                    setXp(p => p + VOCAB_DATA.find(l => l.id === currentLevelId).xp);
                }
                if (currentLevelId < VOCAB_DATA.length) {
                    setCurrentLevelId(p => p + 1);
                } else {
                    setTab('profile');
                }
            };

            const resetProgress = () => {
                if (confirm("Are you sure you want to reset your progress?")) {
                    setCompleted([]); setXp(0); setCurrentLevelId(1); localStorage.removeItem('lekker_lingo_v1');
                }
            }

            return (
                <div className="app-container">
                    <div className="h-full flex flex-col">
                        <div className="flex-1 overflow-y-auto custom-scrollbar bg-[#FDF6E3]">
                            {tab === 'path' && (
                                <div className="page-enter pb-[100px]">
                                    <Header title="Your Journey" subtitle="Lekker Lingo" rightAction={<div className="bg-[#FADBD8] text-[#C0392B] font-bold px-3 py-1 rounded-full text-xs border border-red-100">{xp} XP</div>} />
                                    <div className="px-4 mt-2">
                                        {VOCAB_DATA.map(l => (
                                            <LevelCard
                                                key={l.id}
                                                level={l}
                                                status={completed.includes(l.id) ? 'completed' : (l.id === currentLevelId ? 'active' : (l.id < currentLevelId ? 'completed' : 'locked'))}
                                                onClick={() => handleLevelSelect(l.id)}
                                            />
                                        ))}
                                    </div>
                                </div>
                            )}
                            {tab === 'learn' && (<Quiz level={VOCAB_DATA.find(l => l.id === currentLevelId)} onNext={handleNextLevel} />)}
                            {tab === 'profile' && (
                                <div className="page-enter">
                                    <Header title="Passport" subtitle="Stats" rightAction={<button onClick={resetProgress} className="text-gray-400 hover:text-red-500 transition-colors"><Icons.Reset /></button>} />
                                    <Profile xp={xp} completed={completed} />
                                </div>
                            )}
                        </div>
                        <TabBar active={tab} onChange={setTab} />
                    </div>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>

</html>